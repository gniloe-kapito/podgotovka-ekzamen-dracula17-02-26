<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>–ó–º–µ–π–∫–∞</title>
    <style>
        :root {
            --bg-gradient-start: #0f0c29;
            --bg-gradient-end: #302b63;
            --container-bg: #1a1a2e;
            --text-color: #ffffff;
            --header-color: #00d4ff;
            --border-color: #3a3a52;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, var(--bg-gradient-start) 0%, var(--bg-gradient-end) 100%);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            overflow: hidden;
            touch-action: none;
            transition: background 0.3s ease;
            position: relative;
        }

        /* –ó–≤—ë–∑–¥–Ω—ã–π —Ñ–æ–Ω */
        body::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                radial-gradient(2px 2px at 20px 30px, #eee, transparent),
                radial-gradient(2px 2px at 60px 70px, #fff, transparent),
                radial-gradient(1px 1px at 50px 50px, #ddd, transparent),
                radial-gradient(1px 1px at 130px 80px, #fff, transparent),
                radial-gradient(2px 2px at 90px 10px, #eee, transparent);
            background-size: 300px 300px;
            animation: twinkle 200s linear infinite;
            opacity: 0.6;
            pointer-events: none;
        }

        @keyframes twinkle {
            0%, 100% { 
                opacity: 0.6;
                transform: scale(1);
            }
            50% { 
                opacity: 0.3;
                transform: scale(1.1);
            }
        }

        .container {
            text-align: center;
            background: var(--container-bg);
            padding: 20px;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
            max-width: 100%;
            transition: background 0.3s ease;
            position: relative;
            z-index: 10;
            animation: slideIn 0.5s ease-out;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(-30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        h1 {
            color: var(--header-color);
            margin-bottom: 15px;
            font-size: 2em;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
            transition: color 0.3s ease;
        }

        .score-board {
            display: flex;
            justify-content: space-around;
            margin-bottom: 15px;
            font-size: 1em;
            gap: 10px;
        }

        .score-item {
            background: linear-gradient(135deg, var(--header-color), #764ba2);
            color: white;
            padding: 8px 15px;
            border-radius: 10px;
            font-weight: bold;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
            flex: 1;
        }

        canvas {
            border: 4px solid var(--header-color);
            border-radius: 10px;
            background: #1a1a2e;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            image-rendering: pixelated;
            max-width: 100%;
            height: auto;
        }

        .controls {
            margin-top: 15px;
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            max-width: 200px;
            margin-left: auto;
            margin-right: auto;
        }

        .control-btn {
            background: linear-gradient(135deg, var(--header-color), #764ba2);
            color: white;
            border: none;
            padding: 15px;
            border-radius: 10px;
            font-size: 1.5em;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
            transition: transform 0.1s;
            user-select: none;
        }

        .control-btn:active {
            transform: scale(0.95);
        }

        .control-btn:nth-child(1) {
            grid-column: 2;
        }

        .control-btn:nth-child(2) {
            grid-column: 1;
        }

        .control-btn:nth-child(3) {
            grid-column: 3;
        }

        .control-btn:nth-child(4) {
            grid-column: 2;
        }

        .start-screen, .game-over {
            display: none;
            padding: 40px 20px;
            text-align: center;
        }

        .start-screen {
            display: block;
        }

        .start-screen h2 {
            color: var(--header-color);
            font-size: 2em;
            margin-bottom: 20px;
            transition: color 0.3s ease;
        }

        .start-screen p {
            color: var(--text-color);
            font-size: 1.1em;
            margin-bottom: 30px;
            line-height: 1.6;
            transition: color 0.3s ease;
        }

        .start-btn {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 15px 50px;
            border-radius: 10px;
            font-size: 1.2em;
            cursor: pointer;
            transition: transform 0.3s ease;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }

        .start-btn:hover {
            transform: scale(1.05);
        }

        .start-btn:active {
            transform: scale(0.95);
        }

        .game-over h2 {
            color: var(--header-color);
            font-size: 2em;
            margin-bottom: 20px;
            transition: color 0.3s ease;
        }

        .game-over p {
            font-size: 1.3em;
            color: var(--text-color);
            margin-bottom: 30px;
            transition: color 0.3s ease;
        }

        .game-over button {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 15px 40px;
            border-radius: 10px;
            font-size: 1.1em;
            cursor: pointer;
            transition: transform 0.2s;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }

        .game-over button:active {
            transform: scale(0.95);
        }

        .quiz-content {
            display: none;
        }

        @media (min-width: 768px) {
            h1 {
                font-size: 2.5em;
            }
            .score-board {
                font-size: 1.2em;
            }
            .container {
                padding: 30px;
            }
        }
    </style>
</head>
<body>
    <!-- Start Screen -->
    <div class="start-screen" id="startScreen">
        <h2>üßõ –ó–ú–ï–ô–ö–ê üßõ</h2>
        <p>–°–æ–±–∏—Ä–∞–π –µ–¥—É –∏ —Ä–∞—Å—Ç–∏!<br>–ù–µ –≤—Ä–µ–∑–∞–π—Å—è –≤ —Å—Ç–µ–Ω—ã –∏ —Å–µ–±—è!</p>
        <button class="start-btn" onclick="startGame()">–ù–ê–ß–ê–¢–¨ –ò–ì–†–£</button>
    </div>
    
    <div class="container quiz-content" id="gameContent">
        <h1>üßõ –ó–ú–ï–ô–ö–ê üßõ</h1>
        
        <div class="score-board">
            <div class="score-item">
                –°—á—ë—Ç: <span id="score">0</span>
            </div>
            <div class="score-item">
                –†–µ–∫–æ—Ä–¥: <span id="highScore">0</span>
            </div>
        </div>
        
        <canvas id="gameCanvas" width="300" height="300"></canvas>
        
        <!-- Mobile Controls -->
        <div class="controls">
            <button class="control-btn" id="btnUp">‚Üë</button>
            <button class="control-btn" id="btnLeft">‚Üê</button>
            <button class="control-btn" id="btnRight">‚Üí</button>
            <button class="control-btn" id="btnDown">‚Üì</button>
        </div>
    </div>

    <div class="game-over" id="gameOver">
        <h2>–ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞!</h2>
        <p>–í–∞—à —Å—á—ë—Ç: <span id="finalScore">0</span></p>
        <button onclick="restartGame()">–ò–≥—Ä–∞—Ç—å —Å–Ω–æ–≤–∞</button>
    </div>

    <script>
        var canvas = document.getElementById('gameCanvas');
        var ctx = canvas.getContext('2d');
        
        var grid = 30;
        var count = 0;
        
        var snake = {
            x: 150,
            y: 150,
            dx: grid,
            dy: 0,
            cells: [],
            maxCells: 1
        };
        
        var apple = {
            x: 90,
            y: 90
        };

        const snakeHeadImg = new Image();
        snakeHeadImg.src = './1 (1).png';
        
        const foodImg = new Image();
        foodImg.src = './1 (2).png';

        let score = 0;
        let highScore = localStorage.getItem('snakeHighScore') || 0;
        let gameRunning = false;
        let gameStarted = false;

        document.getElementById('highScore').textContent = highScore;

        function getRandomInt(min, max) {
            return Math.floor(Math.random() * (max - min)) + min;
        }

        function startGame() {
            document.getElementById('startScreen').style.display = 'none';
            document.getElementById('gameContent').style.display = 'block';
            gameStarted = true;
            gameRunning = true;
            
            snake.x = 150;
            snake.y = 150;
            snake.dx = grid;
            snake.dy = 0;
            snake.cells = [];
            snake.maxCells = 4;
            
            score = 0;
            document.getElementById('score').textContent = score;
            
            apple.x = getRandomInt(0, 10) * grid;
            apple.y = getRandomInt(0, 10) * grid;
            
            requestAnimationFrame(loop);
        }

        function loop() {
            if(!gameRunning) return;
            
            requestAnimationFrame(loop);

            // slow game loop - –∑–∞–º–µ–¥–ª—è–µ–º –∑–º–µ–π–∫—É (–±—ã–ª–æ 6, —Ç–µ–ø–µ—Ä—å 12 = –º–µ–¥–ª–µ–Ω–Ω–µ–µ –≤ 2 —Ä–∞–∑–∞)
            if (++count < 25) {
                return;
            }

            count = 0;
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            ctx.fillStyle = '#1a1a2e';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            snake.x += snake.dx;
            snake.y += snake.dy;

            if (snake.x < 0 || snake.x >= canvas.width || 
                snake.y < 0 || snake.y >= canvas.height) {
                gameOver();
                return;
            }

            snake.cells.unshift({x: snake.x, y: snake.y});

            if (snake.cells.length > snake.maxCells) {
                snake.cells.pop();
            }

            if(foodImg.complete) {
                const pulse = Math.sin(Date.now() / 200) * 0.1 + 1;
                const size = grid * pulse;
                ctx.drawImage(
                    foodImg,
                    apple.x + (grid - size)/2,
                    apple.y + (grid - size)/2,
                    size,
                    size
                );
            }

            snake.cells.forEach(function(cell, index) {
                
                if(index === 0 && snakeHeadImg.complete) {
                    ctx.save();
                    ctx.translate(cell.x + grid/2, cell.y + grid/2);
                    
                    if(snake.dx === grid) ctx.rotate(Math.PI / 2);
                    else if(snake.dx === -grid) ctx.rotate(-Math.PI / 2);
                    else if(snake.dy === grid) ctx.rotate(Math.PI);
                    
                    ctx.drawImage(snakeHeadImg, -grid/2, -grid/2, grid, grid);
                    ctx.restore();
                } else {
                    const alpha = 1 - (index / snake.cells.length * 0.5);
                    const gradient = ctx.createRadialGradient(
                        cell.x + grid/2,
                        cell.y + grid/2,
                        0,
                        cell.x + grid/2,
                        cell.y + grid/2,
                        grid/2
                    );
                    gradient.addColorStop(0, `rgba(102, 126, 234, ${alpha})`);
                    gradient.addColorStop(1, `rgba(118, 75, 162, ${alpha})`);
                    
                    ctx.fillStyle = gradient;
                    ctx.beginPath();
                    ctx.arc(
                        cell.x + grid/2,
                        cell.y + grid/2,
                        grid/2 - 2,
                        0,
                        2 * Math.PI
                    );
                    ctx.fill();
                }

                if (cell.x === apple.x && cell.y === apple.y) {
                    snake.maxCells++;
                    score++;
                    document.getElementById('score').textContent = score;
                    
                    if(score > highScore) {
                        highScore = score;
                        localStorage.setItem('snakeHighScore', highScore);
                        document.getElementById('highScore').textContent = highScore;
                    }

                    apple.x = getRandomInt(0, 10) * grid;
                    apple.y = getRandomInt(0, 10) * grid;
                }

                for (var i = index + 1; i < snake.cells.length; i++) {
                    if (cell.x === snake.cells[i].x && cell.y === snake.cells[i].y) {
                        gameOver();
                        return;
                    }
                }
            });
        }

        document.addEventListener('keydown', function(e) {
            if(!gameStarted) return;

            if (e.which === 37 && snake.dx === 0) {
                snake.dx = -grid;
                snake.dy = 0;
            }
            else if (e.which === 38 && snake.dy === 0) {
                snake.dy = -grid;
                snake.dx = 0;
            }
            else if (e.which === 39 && snake.dx === 0) {
                snake.dx = grid;
                snake.dy = 0;
            }
            else if (e.which === 40 && snake.dy === 0) {
                snake.dy = grid;
                snake.dx = 0;
            }
        });

        function setupControls() {
            const btnUp = document.getElementById('btnUp');
            const btnDown = document.getElementById('btnDown');
            const btnLeft = document.getElementById('btnLeft');
            const btnRight = document.getElementById('btnRight');

            function handleUp(e) {
                e.preventDefault();
                e.stopPropagation();
                if(snake.dy === 0) {
                    snake.dy = -grid;
                    snake.dx = 0;
                }
            }

            function handleDown(e) {
                e.preventDefault();
                e.stopPropagation();
                if(snake.dy === 0) {
                    snake.dy = grid;
                    snake.dx = 0;
                }
            }

            function handleLeft(e) {
                e.preventDefault();
                e.stopPropagation();
                if(snake.dx === 0) {
                    snake.dx = -grid;
                    snake.dy = 0;
                }
            }

            function handleRight(e) {
                e.preventDefault();
                e.stopPropagation();
                if(snake.dx === 0) {
                    snake.dx = grid;
                    snake.dy = 0;
                }
            }

            if(btnUp) {
                btnUp.addEventListener('touchstart', handleUp, {passive: false});
                btnUp.addEventListener('mousedown', handleUp);
                btnUp.addEventListener('click', handleUp);
            }

            if(btnDown) {
                btnDown.addEventListener('touchstart', handleDown, {passive: false});
                btnDown.addEventListener('mousedown', handleDown);
                btnDown.addEventListener('click', handleDown);
            }

            if(btnLeft) {
                btnLeft.addEventListener('touchstart', handleLeft, {passive: false});
                btnLeft.addEventListener('mousedown', handleLeft);
                btnLeft.addEventListener('click', handleLeft);
            }

            if(btnRight) {
                btnRight.addEventListener('touchstart', handleRight, {passive: false});
                btnRight.addEventListener('mousedown', handleRight);
                btnRight.addEventListener('click', handleRight);
            }
        }

        function gameOver() {
            gameRunning = false;
            document.getElementById('finalScore').textContent = score;
            document.getElementById('gameContent').style.display = 'none';
            document.getElementById('gameOver').style.display = 'block';
        }

        function restartGame() {
            document.getElementById('gameOver').style.display = 'none';
            startGame();
        }

        setupControls();
    </script>
</body>
</html>
